{% set mentions = webmentions | getWebmentionsByUrl(metadata.url + page.url) %}

<section class="webmentions">
	<p>To reply to this post, send a <a href="https://indieweb.org/Webmention">Webmention</a> and it will show up here after the site rebuilds next time.</p>

	{% set reposts = mentions | webmentionsByType('repost-of') | filterOwnWebmentions %}
	{% set likes = mentions | webmentionsByType('like-of') | filterOwnWebmentions %}
	{% set replies = mentions | webmentionsByType('in-reply-to')  %}

	{% set repostsSize = reposts.length %}
	{% set likesSize = likes.length %}
	{% set repliesSize = replies.length %}

	{% set interactions = likes | mergeArrays(reposts) %}

	<section class="likes-and-reposts">
		<div class="social-media">
			{% if likesSize > 0 %}
				<svg  xmlns="http://www.w3.org/2000/svg"  width="20"  height="20"  viewBox="0 0 24 24"  fill="currentColor"  class="icon icon-tabler icons-tabler-filled icon-tabler-heart"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6.979 3.074a6 6 0 0 1 4.988 1.425l.037 .033l.034 -.03a6 6 0 0 1 4.733 -1.44l.246 .036a6 6 0 0 1 3.364 10.008l-.18 .185l-.048 .041l-7.45 7.379a1 1 0 0 1 -1.313 .082l-.094 -.082l-7.493 -7.422a6 6 0 0 1 3.176 -10.215z"/></svg>{{ likesSize }}
			{% endif %}

			{% if repostsSize > 0 %}
				<svg  xmlns="http://www.w3.org/2000/svg"  width="20"  height="20"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-repeat"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 12v-3a3 3 0 0 1 3 -3h13m-3 -3l3 3l-3 3"/><path d="M20 12v3a3 3 0 0 1 -3 3h-13m3 3l-3 -3l3 -3"/></svg>
				{{repostsSize}}
			{% endif %}

			{% if repliesSize > 0 %}
				<svg  xmlns="http://www.w3.org/2000/svg"  width="20"  height="20"  viewBox="0 0 24 24"  fill="currentColor"  class="icon icon-tabler icons-tabler-filled icon-tabler-message-circle"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5.821 4.91c3.899 -2.765 9.468 -2.539 13.073 .535c3.667 3.129 4.168 8.238 1.152 11.898c-2.841 3.447 -7.965 4.583 -12.231 2.805l-.233 -.101l-4.374 .931l-.04 .006l-.035 .007h-.018l-.022 .005h-.038l-.033 .004l-.021 -.001l-.023 .001l-.033 -.003h-.035l-.022 -.004l-.022 -.002l-.035 -.007l-.034 -.005l-.016 -.004l-.024 -.005l-.049 -.016l-.024 -.005l-.011 -.005l-.022 -.007l-.045 -.02l-.03 -.012l-.011 -.006l-.014 -.006l-.031 -.018l-.045 -.024l-.016 -.011l-.037 -.026l-.04 -.027l-.002 -.004l-.013 -.009l-.043 -.04l-.025 -.02l-.006 -.007l-.056 -.062l-.013 -.014l-.011 -.014l-.039 -.056l-.014 -.019l-.005 -.01l-.042 -.073l-.007 -.012l-.004 -.008l-.007 -.012l-.014 -.038l-.02 -.042l-.004 -.016l-.004 -.01l-.017 -.061l-.007 -.018l-.002 -.015l-.005 -.019l-.005 -.033l-.008 -.042l-.002 -.031l-.003 -.01v-.016l-.004 -.054l.001 -.036l.001 -.023l.002 -.053l.004 -.025v-.019l.008 -.035l.005 -.034l.005 -.02l.004 -.02l.018 -.06l.003 -.013l1.15 -3.45l-.022 -.037c-2.21 -3.747 -1.209 -8.391 2.413 -11.119z"/></svg>
				{{repliesSize}}
			{% endif %}

			<div class="share-buttons">
				{% include "components/share-buttons.html" %}
			</div>
		</div>

		{% if interactions.length > 0 %}
			<ul>
				{% for item in interactions %}
					<li>
						<a href="{{ item.url }}" target="_blank">
							<img
									src="{{ item.author.photo }}"
									alt="{{ item.author.name }}"
									data-type="{{ item["wm-property"] }}"
									width="24"
									height="24">

						</a>
					</li>
				{% endfor %}
			</ul>
		{% endif %}
	</section>

</section>